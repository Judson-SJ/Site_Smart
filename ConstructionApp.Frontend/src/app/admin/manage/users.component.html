<!-- src/app/admin/users/users.component.html -->
<div class="p-8">
  <div class="mb-8">
    <h2 class="text-4xl font-bold text-white mb-2">User Management</h2>
    <p class="text-gray-400">Manage all customers, technicians and admins</p>
  </div>

  <!-- Tabs -->
  <div class="border-b border-gray-700 mb-8">
    <div class="flex gap-8">
      <button (click)="selectedRole = 'all'"
              [class]="'pb-4 font-semibold text-lg transition ' +
                      (selectedRole === 'all' ? 'border-teal-500 text-teal-400' : 'text-gray-500')">
        All Users
      </button>
      <button (click)="selectedRole = 'Customer'"
              [class]="'pb-4 font-semibold text-lg transition ' +
                      (selectedRole === 'Customer' ? 'border-teal-500 text-teal-400' : 'text-gray-500')">
        Customers
      </button>
      <button (click)="selectedRole = 'Technician'"
              [class]="'pb-4 font-semibold text-lg transition ' +
                      (selectedRole === 'Technician' ? 'border-teal-500 text-teal-400' : 'text-gray-500')">
        Technicians
      </button>
      <button (click)="selectedRole = 'Admin'"
              [class]="'pb-4 font-semibold text-lg transition ' +
                      (selectedRole === 'Admin' ? 'border-teal-500 text-teal-400' : 'text-gray-500')">
        Admins
      </button>
    </div>
  </div>

  <div class="flex justify-between items-center mb-8">
    <div class="relative max-w-md">
      <i-lucide name="search" class="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"></i-lucide>
      <input [(ngModel)]="searchTerm" (input)="applyFilters()"
             placeholder="Search by name, email..."
             class="w-full pl-12 pr-6 py-4 bg-gray-800 border border-gray-700 rounded-xl text-white">
    </div>
    <button (click)="openAddModal()"
            class="bg-teal-600 hover:bg-teal-500 text-white px-8 py-4 rounded-xl font-semibold flex items-center gap-3">
      <i-lucide name="plus" class="w-6 h-6"></i-lucide> + Add New User
    </button>
  </div>

  <!-- Users Table -->
  <div class="bg-gray-800 rounded-2xl shadow-2xl overflow-hidden">
    <table class="w-full">
      <thead class="bg-gray-900/50">
        <tr>
          <th class="px-8 py-6 text-left">Name</th>
          <th class="px-8 py-6 text-left">Contact Info</th>
          <th class="px-8 py-6 text-left">Date Joined</th>
          <th class="px-8 py-6 text-center">Status</th>
          <th class="px-8 py-6 text-center">Actions</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-700">
        <tr *ngFor="let u of filteredUsers" class="hover:bg-gray-700/50">
          <td class="px-8 py-6">
            <div class="flex items-center gap-4">
              <div class="w-12 h-12 bg-gradient-to-br from-teal-400 to-blue-600 rounded-full flex items-center justify-center font-bold text-xl">
                {{ u.fullName.charAt(0).toUpperCase() }}
              </div>
              <div>
                <p class="font-semibold text-white">{{ u.fullName }}</p>
                <p class="text-sm text-gray-400">ID: {{ u.userID }}</p>
              </div>
            </div>
          </td>
          <td class="px-8 py-6">
            <p class="text-white">{{ u.email }}</p>
            <p class="text-sm text-gray-400">{{ u.phone || 'No phone' }}</p>
          </td>
          <td class="px-8 py-6 text-gray-400">
            {{ u.createdAt | date:'yyyy-MM-dd' }}
          </td>
          <td class="px-8 py-6 text-center">
            <label class="relative inline-flex items-center cursor-pointer">
              <input type="checkbox" [checked]="u.status === 'Active'" (change)="toggleStatus(u)" class="sr-only peer">
              <div class="w-12 h-6 bg-gray-600 rounded-full peer peer-checked:bg-teal-600 after:content-[''] after:absolute after:top-1 after:left-1 after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:after:translate-x-6"></div>
              <span class="ml-3 text-sm font-medium" [class.text-teal-400]="u.status === 'Active'" [class.text-gray-500]="u.status !== 'Active'">
                {{ u.status }}
              </span>
            </label>
          </td>
          <td class="px-8 py-6 text-center">
            <button (click)="openEditModal(u)" class="text-blue-400 hover:text-blue-300 mr-4">
              <i-lucide name="edit-2" class="w-5 h-5"></i-lucide>
            </button>
            <button (click)="deleteUser(u.userID)" class="text-red-400 hover:text-red-300">
              <i-lucide name="trash-2" class="w-5 h-5"></i-lucide>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
