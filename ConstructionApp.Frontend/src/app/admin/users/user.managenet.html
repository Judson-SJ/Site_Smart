<!-- src/app/admin/users/users-management.component.html -->
<div class="p-10 min-h-screen bg-gray-900 text-white">

  <!-- Header -->
  <div class="flex justify-between items-center mb-8">
    <div>
      <h1 class="text-4xl font-bold">User Management</h1>
      <p class="text-gray-400 mt-2">Manage customers, technicians and admin accounts</p>
    </div>
    <button (click)="openAddUser()"
            class="bg-teal-500 hover:bg-teal-600 px-8 py-4 rounded-xl font-bold flex items-center gap-3 transition shadow-lg">
      <i class="fas fa-plus"></i>
      Add New User
    </button>
  </div>

  <!-- Search & Filters -->
  <div class="flex gap-6 mb-8 items-center">
    <div class="relative">
      <i class="fas fa-search absolute left-5 top-1/2 -translate-y-1/2 text-gray-400"></i>
      <input [(ngModel)]="searchQuery" (input)="filterUsers()"
             placeholder="Search by name or email..."
             class="pl-14 pr-6 py-4 bg-gray-800 border border-gray-700 rounded-xl w-96 focus:outline-none focus:ring-2 focus:ring-teal-500">
    </div>

    <select [(ngModel)]="roleFilter" (change)="filterUsers()"
            class="px-6 py-4 bg-gray-800 border border-gray-700 rounded-xl focus:ring-2 focus:ring-teal-500">
      <option value="all">All Roles</option>
      <option value="Admin">Admin</option>
      <option value="Customer">Customer</option>
      <option value="Technician">Technician</option>
    </select>

    <select [(ngModel)]="statusFilter" (change)="filterUsers()"
            class="px-6 py-4 bg-gray-800 border border-gray-700 rounded-xl focus:ring-2 focus:ring-teal-500">
      <option value="all">All Status</option>
      <option value="Active">Active</option>
      <option value="Blocked">Blocked</option>
    </select>
  </div>

  <!-- Users Table -->
  <div class="bg-gray-800 rounded-2xl overflow-hidden border border-gray-700">
    <table class="w-full">
      <thead class="bg-gray-900/70">
        <tr class="text-left text-gray-400 text-sm">
          <th class="px-8 py-5">USER</th>
          <th class="px-8 py-5">EMAIL</th>
          <th class="px-8 py-5">ROLE</th>
          <th class="px-8 py-5">STATUS</th>
          <th class="px-8 py-5">JOINED</th>
          <th class="px-8 py-5 text-center">ACTIONS</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-700">
        <tr *ngFor="let user of filteredUsersList" class="hover:bg-gray-750 transition">
          <td class="px-8 py-6">
            <div class="flex items-center gap-4">
              <div class="w-12 h-12 rounded-full bg-gradient-to-br from-teal-500 to-blue-600 flex items-center justify-center font-bold text-lg">
                {{ user.fullName.charAt(0) }}
              </div>
              <div>
                <p class="font-semibold text-white">{{ user.fullName }}</p>
                <p class="text-sm text-gray-400">{{ user.phone || 'No phone' }}</p>
              </div>
            </div>
          </td>
          <td class="px-8 py-6 text-gray-300">{{ user.email }}</td>
          <td class="px-8 py-6">
            <span [class]="user.role === 'Admin' ? 'text-purple-400 font-medium' :
                          user.role === 'Technician' ? 'text-blue-400 font-medium' :
                          'text-green-400 font-medium'">
              {{ user.role }}
            </span>
          </td>
          <td class="px-8 py-6">
            <span [class.text-green-400]="user.status === 'Active'"
                  [class.text-red-400]="user.status === 'Blocked'"
                  class="px-4 py-2 rounded-full text-sm font-medium"
                  [class.bg-green-900]="user.status === 'Active'"
                  [class.bg-red-900]="user.status === 'Blocked'">
              {{ user.status }}
            </span>
          </td>
          <td class="px-8 py-6 text-gray-400">
            {{ user.createdAt | date:'dd MMM yyyy' }}
          </td>
          <td class="px-8 py-6 text-center">
            <button (click)="openEditUser(user)" class="text-blue-400 hover:text-blue-300 mx-3">
              <i class="fas fa-edit"></i>
            </button>
            <button (click)="toggleUserStatus(user)"
                    [class.text-red-400]="user.status === 'Active'"
                    [class.text-green-400]="user.status === 'Blocked'"
                    class="mx-3">
              <i [class]="user.status === 'Active' ? 'fas fa-ban' : 'fas fa-check-circle'"></i>
            </button>
            <button (click)="deleteUser(user.userID)" class="text-red-400 hover:text-red-300 mx-3">
              <i class="fas fa-trash"></i>
            </button>
          </td>
        </tr>

        <!-- Empty State -->
        <tr *ngIf="filteredUsersList.length === 0">
          <td colspan="6" class="text-center py-16 text-gray-500">
            <i class="fas fa-users text-6xl mb-4 opacity-20"></i>
            <p class="text-xl">No users found</p>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- Add/Edit Modal (இதை component-ல separate ஆ இருந்தாலும் இங்க add பண்ணலாம்) -->
<!-- அல்லது separate modal component use பண்ணுங்க -->
